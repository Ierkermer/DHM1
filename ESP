local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local highlight = Instance.new("Highlight")
highlight.Name = "Highlight"

game.Players.PlayerAdded:Connect(function(player)
    repeat wait() until player.Character
    if not player.Character:FindFirstChild("HumanoidRootPart"):FindFirstChild("Highlight") then
    local highlightClone = highlight:Clone()
    highlightClone.Adornee = player.Character
    highlightClone.Parent = player.Character:FindFirstChild("HumanoidRootPart")
    highlightClone.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
    highlightClone.Name = "Highlight"
    end
end)

RunService.Heartbeat:Connect(function()
    for i, v in pairs(Players:GetPlayers()) do
    if v.Character and v.Character:FindFirstChild("HumanoidRootPart") then
    if EspEnabled and not v.Character:FindFirstChild("HumanoidRootPart"):FindFirstChild("Highlight") then
        local highlightClone = highlight:Clone()
        highlightClone.Adornee = v.Character
        highlightClone.Parent = v.Character:FindFirstChild("HumanoidRootPart")
        highlightClone.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
        highlightClone.Name = "Highlight"
        task.wait()
    elseif not EspEnabled and v.Character:FindFirstChild("HumanoidRootPart"):FindFirstChild("Highlight") then
    v.Character.HumanoidRootPart.Highlight:Destroy()
    end
    end
end
end)
